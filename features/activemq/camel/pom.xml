<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>org.opennms.features</groupId>
    <artifactId>org.opennms.features.activemq</artifactId>
    <version>19.0.0-SNAPSHOT</version>
  </parent>
  <packaging>bundle</packaging>
  <groupId>org.opennms.features.activemq</groupId>
  <artifactId>org.opennms.features.activemq.camel</artifactId>
  <description>This OSGi bundle wraps the activemq-camel jar.</description>

  <build>
      <plugins>
        <plugin>
          <groupId>org.apache.felix</groupId>
          <artifactId>maven-bundle-plugin</artifactId>
          <extensions>true</extensions>
          <executions>
           <execution>
              <id>bundle-manifest</id>
              <phase>prepage-package</phase>
              <goals>
                <goal>manifest</goal>
              </goals>
            </execution>
          </executions>
          <configuration>
            <instructions>
              <Bundle-RequiredExecutionEnvironment>JavaSE-1.8</Bundle-RequiredExecutionEnvironment>
              <Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
              <Bundle-Version>${project.version}</Bundle-Version>
              <Import-Package>
javax.annotation;version="[1.0,2)";resolution:=optional,javax.jms;version="[1.1,2)",org.apache.activemq,org.apache.activemq.advisory,org.apache.activemq.broker,org.apache.activemq.broker.inteceptor,org.apache.activemq.broker.region,org.apache.activemq.broker.view,org.apache.activemq.command,org.apache.activemq.management,org.apache.activemq.pool,org.apache.activemq.spring,org.apache.activemq.transport,org.apache.activemq.util,org.apache.camel;version="[2.13,3)",org.apache.camel.api.management;version="[2.13,3)",org.apache.camel.component.jms;version="[2.13,3)",org.apache.camel.converter;version="[2.13,3)",org.apache.camel.impl;version="[2.13,3)",org.apache.camel.spi;version="[2.13,3)",org.apache.camel.util;version="[2.13,3)",org.slf4j;version="[1.7,2)",org.springframework.jms.connection;version="[3,5)",org.springframework.transaction
              </Import-Package>
              <Export-Package>
org.apache.activemq.camel;uses:="org.apache.activemq.management,org.apache.activemq,org.apache.camel,org.apache.activemq.transport,org.apache.activemq.util,org.apache.activemq.spring,javax.jms,org.apache.camel.component.jms,org.apache.camel.util";version="5.10.0",org.apache.activemq.camel.component;uses:="org.apache.activemq.command,javax.jms,org.apache.activemq,org.apache.camel,org.apache.activemq.advisory,org.slf4j,org.apache.camel.util,org.springframework.jms.connection,org. apache.camel.component.jms,org.apache.camel.spi,org.springframework.transaction,org.apache.activemq.spring,javax.annotation";version="5.10.0",org.apache.activemq.camel.component.broker;uses:="org.apache.camel.impl,org.apache.camel.util,org.apache.activemq.command,org.apache.camel,org.apache.camel.spi,org.apache.activemq.broker.view,javax.jms,org.apache.camel.component.jms,org.apache.activemq.broker,org.apache.activemq.broker.inteceptor,org.apache.camel.api.management,org.apache.activemq.broker.region,org.apache.camel.converter";version="5.10.0",org.apache.activemq.camel.converter;uses:="org.apache.activemq.command,org.apache.camel,javax.jms,org.apache.camel.component.jms";version="5.10.0"
              </Export-Package>
            </instructions>
          </configuration>
        </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>2.4.3</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                        <configuration>
                            <artifactSet>
                                <includes>
                                    <include>org.apache.activemq:activemq-camel</include>
                                </includes>
                            </artifactSet>
                            <promoteTransitiveDependencies>false</promoteTransitiveDependencies>
                            <createDependencyReducedPom>false</createDependencyReducedPom>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
      </plugins>
  </build>

  <dependencies>
    <dependency>
      <groupId>org.apache.activemq</groupId>
      <artifactId>activemq-camel</artifactId>
      <version>${activemqVersion}</version>
      <exclusions>
        <exclusion>
          <groupId>javax.xml.bind</groupId>
          <artifactId>jaxb-api</artifactId>
        </exclusion>
        <exclusion>
          <groupId>com.sun.xml.bind</groupId>
          <artifactId>jaxb-impl</artifactId>
        </exclusion>
        <exclusion>
          <groupId>commons-logging</groupId>
          <artifactId>commons-logging</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-beans</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-context</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-jms</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-aop</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-tx</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-core</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-expression</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
  </dependencies>
</project>
